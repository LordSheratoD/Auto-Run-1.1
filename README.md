# Бот сбора ресурсов New World

Позволяет запустить бота для сбора ресурсов по заранее записанному пути. 
Программа не использует ресурсы игры, взаимодействует только с интерфейсом с использованием библиотеки OpenCV.


## Установка:

  1. Скачать и установить OverWolf см. readme в папке ts.

  2. Скопировать репозиторий в Visual Studio, либо запустить решение.
  
  3. Скомпилировать проект в Visual Studio.


## Элементы управления:
  
  -Клавиша F2 - запуск бота
  
  -Клавиша F4 - остановить выполнение программы
  
  -Клавиша E - инициализирует точку сбора ресурса
  
  -Кнопка StartStream - инициализирует запись пути, 
   во время перемещения персонажа
   
   
## Описание:
  На текущий момент запустить бота можно только будучи в вайтлисте OverWolf, так как команда разработчиков отключила возможность запускать и тестировать не авторизованные приложения. API OverWolf позволяет получить координаты персонажа игры и записать их в файл, что позволяет вытащить эти данные и направлять персонажа в нужном направлении. Есть и другой способ - используя OCR, однако даже с применением фильтров данный метод весьма не точный, другая проблема - низкий FPS примерно 7-10 кадров в секунду, чего не достаточно для корректной работы.
  
## Запись маршрута:  
  Перед запуском заранее необходимо продумать наиболее безопасный маршрут, минимизируя объекты на пути в которых бот может застрять (горы, если нужно прыгать или спрыгивать с высоты, дома, узкие проходы). Маршрут должен быть зациклен, т.е с какой точки начали в той и заканчиваем маршрут. Кнопка StartStream запускает запись перемещения персонажа, файл с записаными координатами находится по пути <имя_пользователя>\Documents\OverwolfAutopath\stream.pos. Нажатие на клавишу E позволяет записать текущее местоположение как точку для сбора ресурса. В конце маршрута нужно остановить запись нажатием кнопки StopStream, создасться файл stream.pos с координатами пройденного пути.
  
## Запуск бота:
 После того, как будет записан маршрут и создасться файл steam.pos можно запускать непосредственно бота. Перед запуском необходимо установить разрешение 1280х1024 оконный режим, так как используется библиотека OpenCV для идентификации ресурса по шаблону. Для других разрешений шаблоны не предусмотрены, поэтому при ином разрешении бот будет работать некорректно, игнорируя точки сбора ресурсов. Второй момент необходимо изменить скорость камеры в настройках игры на минимальную. Запуск осуществляется нажатием клавиши F2 либо кнопки StartBot. Запуск можно осуществлять на любой близжайшей точке к записанному маршруту. Если персонаж находится далеко от близжайшей координаты, он побежит по прямой игнорируя препятствия, в таком случае велика вероятность того, что персонаж застрянет. Остановить выполнение можно нажатием клавиши F4 либо кнопки StopBot
  
